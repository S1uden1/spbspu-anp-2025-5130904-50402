#include <iostream>
#include <cctype>
#include <cstring>
#include <cstdlib>

namespace islamov {
  const char* getSecondString() {
    return "abc";
  }

  int excludeCharsFromFirstString( const char* first_string, const char* second_string, char* result_buffer, size_t buffer_size) noexcept {
      if (first_string == 0 || second_string == 0 || result_buffer == 0) {
      return -1;
    }
  
    size_t result_index = 0;
    const char* current_char_ptr = first_string;
  
    while (*current_char_ptr != '\0') {
      int should_exclude = 0;
      const char* search_char_ptr = second_string;
    
      while (*search_char_ptr != '\0') {
        if (*current_char_ptr == *search_char_ptr) {
          should_exclude = 1;
          break;
        }
        search_char_ptr = search_char_ptr + 1;
      }
    
      if (should_exclude == 0) {
        if (result_index >= buffer_size - 1) {
          return -1;
        }
        result_buffer[result_index] = *current_char_ptr;
        result_index = result_index + 1;
      }
    
      current_char_ptr = current_char_ptr + 1;
  }
  
  result_buffer[result_index] = '\0';
  return (int)result_index;
  }

  int removeLatinLetters(const char* input_string, char* result_buffer, size_t buffer_size) noexcept {
    if (input_string == 0 || result_buffer == 0) {
      return -1;
    }
  
    size_t result_index = 0;
    const char* current_char_ptr = input_string;
  
    while (*current_char_ptr != '\0') {
      unsigned char current_char = (unsigned char)(*current_char_ptr);
    
      if (std::isalpha(current_char) == 0) {
        if (result_index >= buffer_size - 1) {
          return -1;
        }
        result_buffer[result_index] = *current_char_ptr;
        result_index = result_index + 1;
      }
    
      current_char_ptr = current_char_ptr + 1;
    }
  
    result_buffer[result_index] = '\0';
    return (int)result_index;
  }

} 

int main() {
  char* input_line = 0;
  size_t buffer_size = 0;
  
  std::cout << "Enter a string: ";
  
  ssize_t chars_read = getline(&input_line, &buffer_size, stdin);
  if (chars_read == -1) {
    std::cerr << "Error reading input" << std::endl;
    if (input_line != 0) {
      std::free(input_line);
    }
    return 1;
  }
  
  if (chars_read > 0 && input_line[chars_read - 1] == '\n') {
    input_line[chars_read - 1] = '\0';
    chars_read = chars_read - 1;
  }
  
  size_t max_result_size = (size_t)chars_read + 1;
  char* result_buffer = (char*)std::malloc(max_result_size);
  
  if (result_buffer == 0) {
    std::cerr << "Memory allocation failed" << std::endl;
    std::free(input_line);
    return 1;
  }
  
  int result_length = islamov::excludeCharsFromFirstString(
    input_line,
    islamov::getSecondString(),
    result_buffer,
    max_result_size
  );
  
  if (result_length < 0) {
    std::cerr << "Error in string processing" << std::endl;
    std::free(input_line);
    std::free(result_buffer);
    return 1;
  }
  
  std::cout << result_buffer << std::endl;
  
  result_length = islamov::removeLatinLetters(
    input_line,
    result_buffer,
    max_result_size
  );
  
  if (result_length < 0) {
    std::cerr << "Error in string processing" << std::endl;
    std::free(input_line);
    std::free(result_buffer);
    return 1;
  }
  
  std::cout << result_buffer << std::endl;
  
  std::free(input_line);
  std::free(result_buffer);
  return 0;
}